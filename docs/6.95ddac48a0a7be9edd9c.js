(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{Yj9t:function(t,n,i){"use strict";i.r(n),i.d(n,"AuthModule",(function(){return m}));var e=i("PCNd"),o=i("P+IX"),s=i("tyNb"),r=i("ofXK"),c=i("3Pt+"),a=i("fXoL");let b=(()=>{class t{constructor(t){this.viewContainerRef=t}}return t.\u0275fac=function(n){return new(n||t)(a.Hb(a.O))},t.\u0275dir=a.Cb({type:t,selectors:[["","appPlaceholder",""]]}),t})(),l=(()=>{class t{constructor(){this.close=new a.n}onClose(){this.close.emit()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=a.Bb({type:t,selectors:[["app-alert"]],inputs:{message:"message"},outputs:{close:"close"},decls:7,vars:1,consts:[[1,"backdrop",3,"click"],[1,"alert-box"],[1,"alert-box-actions"],[1,"btn","btn-primary",3,"click"]],template:function(t,n){1&t&&(a.Kb(0,"div",0),a.Rb("click",(function(){return n.onClose()})),a.Kb(1,"div",1),a.Kb(2,"p"),a.dc(3),a.Jb(),a.Kb(4,"div",2),a.Kb(5,"button",3),a.Rb("click",(function(){return n.onClose()})),a.dc(6," Close "),a.Jb(),a.Jb(),a.Jb(),a.Jb()),2&t&&(a.xb(3),a.ec(n.message))},styles:[".backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,.75);z-index:50}.alert-box[_ngcontent-%COMP%]{position:fixed;top:30vh;left:20vw;width:60vw;padding:16px;z-index:100;background:#fff;box-shadow:0 2px 8px rgba(0,0,0,.26)}.alert-box-actions[_ngcontent-%COMP%]{text-align:right}"]}),t})();var d=i("qXBG");let u=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=a.Bb({type:t,selectors:[["app-loading-spinner"]],decls:5,vars:0,consts:[[1,"lds-ring"]],template:function(t,n){1&t&&(a.Kb(0,"div",0),a.Ib(1,"div"),a.Ib(2,"div"),a.Ib(3,"div"),a.Ib(4,"div"),a.Jb())},styles:[".lds-ring[_ngcontent-%COMP%]{display:inline-block;position:relative;width:80px;height:80px}.lds-ring[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{box-sizing:border-box;display:block;position:absolute;width:64px;height:64px;margin:8px;border-radius:50%;animation:lds-ring 1.2s cubic-bezier(.5,0,.5,1) infinite;border:8px solid transparent;border-top-color:#0d6efd}.lds-ring[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{animation-delay:-.45s}.lds-ring[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){animation-delay:-.3s}.lds-ring[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){animation-delay:-.15s}@keyframes lds-ring{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}"]}),t})();function p(t,n){}function g(t,n){1&t&&(a.Kb(0,"div",5),a.Ib(1,"app-loading-spinner"),a.Jb())}function h(t,n){if(1&t){const t=a.Lb();a.Kb(0,"form",6),a.Rb("ngSubmit",(function(){return a.Zb(t),a.Tb().onSubmit()})),a.Kb(1,"div",7),a.Kb(2,"label",8),a.dc(3,"E-mail"),a.Jb(),a.Ib(4,"input",9),a.Jb(),a.Kb(5,"div",7),a.Kb(6,"label",10),a.dc(7,"Password"),a.Jb(),a.Ib(8,"input",11),a.Jb(),a.Kb(9,"div",12),a.Kb(10,"button",13),a.dc(11),a.Jb(),a.Jb(),a.Kb(12,"div",14),a.Kb(13,"button",15),a.Rb("click",(function(){return a.Zb(t),a.Tb().onSwitchMode()})),a.dc(14),a.Jb(),a.Jb(),a.Jb()}if(2&t){const t=a.Tb();a.Ub("formGroup",t.credentials),a.xb(10),a.Ub("disabled",!t.credentials.valid),a.xb(1),a.ec(t.isLoginMode?"Login":"Sign Up"),a.xb(3),a.fc("Switch to ",t.isLoginMode?"Sign Up":"Login","")}}let f=(()=>{class t{constructor(t,n,i,e){this.cFR=t,this.fb=n,this.auth=i,this.router=e,this.isLoginMode=!0,this.isLoading=!1}ngOnInit(){this.credentials=this.fb.group({email:["",[c.n.required,c.n.email]],password:["",[c.n.required,c.n.minLength(6)]]})}onSwitchMode(){this.isLoginMode=!this.isLoginMode}onSubmit(){if(!this.credentials.valid)return;const t={email:this.credentials.controls.email.value,password:this.credentials.controls.password.value};let n;this.isLoading=!0,n=this.isLoginMode?this.auth.login(t):this.auth.signup(t),n.subscribe(t=>{this.isLoading=!1,this.router.navigate(["/recipes"])},t=>{this.isLoading=!1,this.showErrorAlert(t)}),this.credentials.reset()}showErrorAlert(t){const n=this.cFR.resolveComponentFactory(l),i=this.alertHost.viewContainerRef;i.clear();const e=i.createComponent(n);e.instance.message=t,this.closeSub=e.instance.close.subscribe(()=>{this.closeSub.unsubscribe(),i.clear()})}ngOnDestroy(){this.closeSub&&this.closeSub.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)(a.Hb(a.j),a.Hb(c.d),a.Hb(d.a),a.Hb(s.c))},t.\u0275cmp=a.Bb({type:t,selectors:[["app-auth"]],viewQuery:function(t,n){var i;1&t&&a.hc(b,!0),2&t&&a.Yb(i=a.Sb())&&(n.alertHost=i.first)},decls:5,vars:2,consts:[["appPlaceholder",""],[1,"row","justify-content-md-center"],[1,"col","col-sm-6"],["class","text-center",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"text-center"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","email"],["formControlName","email","type","email","id","email",1,"form-control"],["for","password"],["formControlName","password","type","password","id","password",1,"form-control"],[1,"mt-3"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"mt-2"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,n){1&t&&(a.cc(0,p,0,0,"ng-template",0),a.Kb(1,"div",1),a.Kb(2,"div",2),a.cc(3,g,2,0,"div",3),a.cc(4,h,15,4,"form",4),a.Jb(),a.Jb()),2&t&&(a.xb(3),a.Ub("ngIf",n.isLoading),a.xb(1),a.Ub("ngIf",!n.isLoading))},directives:[b,r.i,u,c.o,c.k,c.h,c.a,c.j,c.f],encapsulation:2}),t})(),m=(()=>{class t{}return t.\u0275mod=a.Fb({type:t}),t.\u0275inj=a.Eb({factory:function(n){return new(n||t)},imports:[[r.b,c.m,s.g.forChild([{path:"",canActivate:[o.a],component:f}]),e.a],s.g]}),t})()}}]);
//# sourceMappingURL=6.95ddac48a0a7be9edd9c.js.map